# 用户登录和注册功能测试计划

## 1. 测试概述

### 1.1 测试目标
- 验证用户登录功能的完整性和正确性
- 验证用户注册功能的完整性和正确性
- 确保登录和注册流程的用户体验符合预期
- 验证系统的安全性和数据完整性

### 1.2 测试范围
**包含功能：**
- 用户登录模块
  - 手机号验证码登录
  - 验证码获取和验证
  - 登录状态管理
  - 页面跳转逻辑
- 用户注册模块
  - 手机号验证码注册
  - 用户协议确认
  - 新用户创建
  - 自动登录和跳转

**不包含功能：**
- 商品管理
- 购物车管理
- 订单管理
- 用户个人信息管理

### 1.3 测试类型
- **功能测试：** 验证登录和注册的核心业务逻辑
- **UI测试：** 验证用户界面交互和显示
- **API测试：** 验证后端接口的正确性
- **集成测试：** 验证前后端集成的完整性
- **边界测试：** 验证输入边界条件的处理
- **异常测试：** 验证错误场景的处理

## 2. 测试环境

### 2.1 测试环境配置
- **前端服务：** http://localhost:5173/
- **后端服务：** http://localhost:3000/
- **数据库：** SQLite (taobei.db)
- **测试框架：** Behave (BDD) + Playwright
- **浏览器：** Chromium (Playwright)

### 2.2 测试数据
- **已注册用户：** 13800138000, 13800138001, 13800138002
- **未注册手机号：** 13900139000, 13900139001, 13900139002
- **测试验证码：** 123456, 888888, 666666
- **无效验证码：** 000000, 111111

## 3. 测试用例设计

### 3.1 用户登录功能测试用例

#### 3.1.1 验证码获取测试
| 用例ID | 测试场景 | 输入数据 | 预期结果 |
|--------|----------|----------|----------|
| LOGIN_001 | 无效手机号格式 | "123" | 提示"请输入正确的手机号码" |
| LOGIN_002 | 有效手机号获取验证码 | "13800138000" | 验证码生成，按钮倒计时 |

#### 3.1.2 登录验证测试
| 用例ID | 测试场景 | 输入数据 | 预期结果 |
|--------|----------|----------|----------|
| LOGIN_003 | 未注册手机号登录 | 手机号: "13900139000", 验证码: "123456" | 提示"该手机号未注册，请先完成注册" |
| LOGIN_004 | 错误验证码登录 | 手机号: "13800138000", 验证码: "000000" | 提示"验证码错误" |
| LOGIN_005 | 成功登录 | 手机号: "13800138000", 验证码: "123456" | 登录成功，跳转首页 |

### 3.2 用户注册功能测试用例

#### 3.2.1 验证码获取测试
| 用例ID | 测试场景 | 输入数据 | 预期结果 |
|--------|----------|----------|----------|
| REG_001 | 无效手机号格式 | "123" | 提示"请输入正确的手机号码" |
| REG_002 | 有效手机号获取验证码 | "13900139000" | 验证码生成，按钮倒计时 |

#### 3.2.2 注册验证测试
| 用例ID | 测试场景 | 输入数据 | 预期结果 |
|--------|----------|----------|----------|
| REG_003 | 已注册手机号注册 | 手机号: "13800138000", 验证码: "123456" | 提示"该手机号已注册，将直接为您登录" |
| REG_004 | 未勾选协议 | 手机号和验证码已输入 | 注册按钮不可点击 |
| REG_005 | 勾选协议 | 勾选用户协议 | 注册按钮可点击 |
| REG_006 | 成功注册 | 手机号: "13700137000", 验证码: "123456", 勾选协议 | 注册成功，自动登录跳转 |

## 4. 测试执行策略

### 4.1 测试执行顺序
1. **环境验证：** 确认前后端服务正常运行
2. **登录功能测试：** 按优先级执行登录测试用例
3. **注册功能测试：** 按优先级执行注册测试用例
4. **缺陷修复验证：** 对发现的问题进行修复和回归测试

### 4.2 测试优先级
- **P0 (高优先级)：** 核心登录和注册流程
- **P1 (中优先级)：** 错误处理和边界条件
- **P2 (低优先级)：** UI交互细节和用户体验

### 4.3 通过标准
- **功能正确性：** 所有核心功能按预期工作
- **错误处理：** 异常情况得到正确处理和提示
- **用户体验：** 界面友好，操作流畅
- **数据完整性：** 数据正确存储和验证

## 5. 风险评估

### 5.1 技术风险
- **网络超时：** 验证码获取可能因网络问题失败
- **数据库连接：** 数据库操作可能失败
- **浏览器兼容性：** 不同浏览器可能表现不一致

### 5.2 缓解措施
- 增加重试机制和超时处理
- 实现数据库连接池和错误恢复
- 使用标准化的测试浏览器环境

## 6. 交付物

### 6.1 测试报告
- 测试执行摘要
- 测试用例执行结果
- 缺陷统计和分析
- 测试覆盖率报告

### 6.2 缺陷报告
- 缺陷详细描述
- 重现步骤
- 严重程度和优先级
- 修复建议

## 7. 成功标准

- **测试覆盖率：** ≥ 95%
- **测试通过率：** ≥ 90%
- **P0级缺陷：** 0个
- **P1级缺陷：** ≤ 2个
- **用户体验评分：** ≥ 4.0/5.0