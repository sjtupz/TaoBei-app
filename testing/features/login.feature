Feature: 用户登录
  作为一个用户
  我想要能够登录系统
  以便访问我的账户

  Background:
    Given 系统已经启动
    And 数据库已经初始化

  Scenario: 请求验证码时手机号格式无效
    Given 用户在登录页面
    When 用户在登录页面输入一个无效的手机号"123"并点击"获取验证码"
    Then 系统不发送验证码
    And 页面提示"请输入正确的手机号码"

  Scenario: 成功获取验证码
    Given 用户在登录页面
    When 用户在登录页面输入一个格式正确的手机号"13800138000"并点击"获取验证码"
    Then 系统为该手机号生成一个6位验证码并打印在控制台
    And "获取验证码"按钮进入60秒倒计时且不可点击
    And 数据库记录手机号和验证码，有效期为60秒

  Scenario: 使用未注册的手机号登录
    Given 一个手机号"13900139000"未被注册
    And 用户在登录页面
    When 用户使用该未注册的手机号和正确的验证码点击"登录"
    Then 系统不让用户登录
    And 页面提示"该手机号未注册，请先完成注册"

  Scenario: 使用错误的验证码登录
    Given 一个手机号"13800138000"已被注册
    And 用户在登录页面
    When 用户使用该手机号和错误的验证码"000000"点击"登录"
    Then 系统不让用户登录
    And 页面提示"验证码错误"

  Scenario: 成功登录
    Given 一个手机号"13800138000"已被注册
    And 用户在登录页面
    When 用户使用该手机号和正确的验证码点击"登录"
    Then 系统验证成功
    And 页面提示"登录成功"
    And 页面自动跳转到首页